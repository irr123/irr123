<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>(Almost) Free Google drive backup (part 1) | Have you truly c...</title><meta name=description content="Have you truly considered the catastrophic risks of losing all your Google Drive data? Can your business afford such a loss?
..."><meta name=keywords content="rclone,google drive,backup,cron,google drive backup,automated backup,rclone google drive,google cloud console,google drive API,service account,rclone service account,cloud storage backup,secure backups,data recovery,rclone automation,google drive data protection,backup with cron,google drive service account,rclone docker,encrypted cloud backup,google drive disaster recovery,cloud storage automation,scheduled backups,rclone config example,rclone tutorial,data redundancy,backup and restore google drive,rclone setup,google drive security,backup best practices"><meta name=author content="Ivan Bogomolov"><meta name=robots content="index,follow"><link rel=canonical href=https://bogomolov.work/blog/posts/google-drive-backup/><link rel=alternate type=application/rss+xml href=/index.xml title="The Archive"><link rel=icon type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=192x192 href=/android-chrome-192x192.png><link rel=icon type=image/png sizes=512x512 href=/android-chrome-512x512.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><meta property="og:title" content="(Almost) Free Google drive backup (part 1)"><meta property="og:description" content="Have you truly considered the catastrophic risks of losing all your Google Drive data? Can your business afford such a loss?
Let me guide you in mitigating those risks. I asked myself the same question and searched for a reliable, out-of-the-box solution. Disappointed with Google’s suggestions, I decided to build my own. Think of it as playing with Lego-assembling the necessary components.
"><meta property="og:type" content="website"><meta property="og:url" content="https://bogomolov.work/blog/posts/google-drive-backup/"><meta property="og:logo" content="https://bogomolov.work/img/the-archive.jpg"><meta property="og:image" content="https://bogomolov.work/blog/posts/google-drive-backup/suit.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:creator content="@_irr123"><meta property="twitter:domain" content="bogomolov.work"><meta property="twitter:url" content="https://bogomolov.work/blog/posts/google-drive-backup/"><meta name=twitter:title content="(Almost) Free Google drive backup (part 1)"><meta name=twitter:description content="Have you truly considered the catastrophic risks of losing all your Google Drive data? Can your business afford such a loss?
Let me guide you in mitigating those risks. I asked myself the same question and searched for a reliable, out-of-the-box solution. Disappointed with Google’s suggestions, I decided to build my own. Think of it as playing with Lego-assembling the necessary components.
"><meta name=twitter:image content="https://bogomolov.work/blog/posts/google-drive-backup/suit.jpg"><meta name=theme-color content="#000000"><link rel=stylesheet href=/css/styles.bundle.min.1e954d88646389d0342d488b8c8799e6137ab200f73b94c5a60c66dbf274a543e9e5179dd87b0603f08133826c78a16b8d89add81235994ae5a51d8087269855.css integrity="sha512-HpVNiGRjidA0LUiLjIeZ5hN6sgD3O5TFpgxm2/J0pUPp5Red2HsGA/CBM4JseKFrjYmt2BI1mUrlpR2AhyaYVQ=="></head><body a=auto><main class=page-content aria-label=Content><div class=w><div class=post-meta><p><a href=/blog/ aria-label="Back to Index" title="Back to Index">← Back</a></p><p><time datetime=2025-02-27T20:12:31+00:00>2025-02-27</time></p></div><h1>(Almost) Free Google drive backup (part 1)</h1><article><p>Have you <em>truly</em> considered the catastrophic risks of losing all your Google
Drive data? Can your business afford such a loss?</p><figure><a href=/blog/posts/google-drive-backup/suit.jpg target=_blank><picture><source srcset=/blog/posts/google-drive-backup/suit_hu_3d07784490532136.webp type=image/webp><source srcset=/blog/posts/google-drive-backup/suit_hu_61b612a6a9b8a0d5.jpg type=image/jpeg><img src=/blog/posts/google-drive-backup/suit_hu_61b612a6a9b8a0d5.jpg alt="generate image in anime style where white collar in suit grabs his head because he realized that lost his reports" loading=eager fetchpriority=high decoding=sync></picture></a></figure><p>Let me guide you in mitigating those risks. I asked myself the same question and
searched for a reliable, out-of-the-box solution. Disappointed with Google’s
suggestions, I decided to build my own. Think of it as playing with
Lego-assembling the necessary components.</p><h2 id=what-building-blocks-do-we-need><a href=#what-building-blocks-do-we-need>#</a> What building blocks do we need?</h2><ul><li>Access to your
<a href=https://console.cloud.google.com/iam-admin/serviceaccounts target=_blank rel="noopener noreferrer">Google Cloud Console</a></li><li>rclone.org: A powerful tool that provides rsync-like CLI functionality for
managing filesystems and cloud storage. It’s well-documented, but we’ll focus
on a streamlined approach</li></ul><h3 id=google-cloud-console-setting-up-the-service-account><a href=#google-cloud-console-setting-up-the-service-account>#</a> Google Cloud Console: Setting Up the Service Account</h3><p>We’ll start with the most crucial step: obtaining the necessary credentials to
interact with the Google API. (Remember to enable the
<a href=https://console.cloud.google.com/apis/library/drive.googleapis.com target=_blank rel="noopener noreferrer">Google Drive API</a>
if you haven’t already) This involves creating a
<a href=https://console.cloud.google.com/iam-admin/serviceaccounts target=_blank rel="noopener noreferrer">Service Account</a>
and generating a
<a href=https://developers.google.com/workspace/guides/create-credentials#create_credentials_for_a_service_account target=_blank rel="noopener noreferrer">JSON private key</a>.</p><p>Here’s an example of what it looks like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;type&#34;: <span style=color:#87ceeb>&#34;service_account&#34;</span>,
</span></span><span style=display:flex><span>  &#34;project_id&#34;: <span style=color:#87ceeb>&#34;&lt;project name&gt;&#34;</span>,
</span></span><span style=display:flex><span>  &#34;private_key_id&#34;: <span style=color:#87ceeb>&#34;&lt;hash&gt;&#34;</span>,
</span></span><span style=display:flex><span>  &#34;private_key&#34;: <span style=color:#87ceeb>&#34;-----BEGIN PRIVATE KEY-----\n&lt;some base64 encoded stuff&gt;\n-----END PRIVATE KEY-----\n&#34;</span>,
</span></span><span style=display:flex><span>  &#34;client_email&#34;: <span style=color:#87ceeb>&#34;&lt;service account name&gt;@&lt;project name&gt;.iam.gserviceaccount.com&#34;</span>,
</span></span><span style=display:flex><span>  &#34;client_id&#34;: <span style=color:#87ceeb>&#34;&lt;another one id&gt;&#34;</span>,
</span></span><span style=display:flex><span>  &#34;auth_uri&#34;: <span style=color:#87ceeb>&#34;https://accounts.google.com/o/oauth2/auth&#34;</span>,
</span></span><span style=display:flex><span>  &#34;token_uri&#34;: <span style=color:#87ceeb>&#34;https://oauth2.googleapis.com/token&#34;</span>,
</span></span><span style=display:flex><span>  &#34;auth_provider_x509_cert_url&#34;: <span style=color:#87ceeb>&#34;https://www.googleapis.com/oauth2/v1/certs&#34;</span>,
</span></span><span style=display:flex><span>  &#34;client_x509_cert_url&#34;: <span style=color:#87ceeb>&#34;https://www.googleapis.com/robot/v1/metadata/x509/&lt;service account name&gt;%40&lt;project name&gt;.iam.gserviceaccount.com&#34;</span>,
</span></span><span style=display:flex><span>  &#34;universe_domain&#34;: <span style=color:#87ceeb>&#34;googleapis.com&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=rclone-configuring-and-executing-the-backup><a href=#rclone-configuring-and-executing-the-backup>#</a> rclone: Configuring and Executing the Backup</h3><p>We’re almost there! The next step is to set up rclone for automated execution
using Cron on a host of your choice. I’ll skip the details of acquiring a
hosting environment.</p><p>Here’s prepared <code>rclone.conf</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span>[google-drive]
</span></span><span style=display:flex><span>type = drive
</span></span><span style=display:flex><span>service_account_file = /config/rclone/sa.json  <span style=color:#0f0># &lt;- The key</span>
</span></span></code></pre></div><p>And here’s how to use it with Docker:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run --rm -it <span style=color:#87ceeb>\
</span></span></span><span style=display:flex><span>    -v ./config:/config/rclone <span style=color:#87ceeb>\
</span></span></span><span style=display:flex><span>    -v ./data:/data <span style=color:#87ceeb>\
</span></span></span><span style=display:flex><span>    rclone/rclone --drive-shared-with-me <span style=color:#87ceeb>\
</span></span></span><span style=display:flex><span>    copy google-drive:&lt;SHARED FOLDER&gt; /data/<span style=color:red>$(</span>date +<span style=color:#87ceeb>&#34;%Y-%m-%d&#34;</span><span style=color:red>)</span>
</span></span></code></pre></div><h3 id=rclone-recovering-the-backup><a href=#rclone-recovering-the-backup>#</a> rclone: Recovering the Backup</h3><p>To restore your backup, simply reverse the source and destination paths in the
rclone copy command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run --rm -it <span style=color:#87ceeb>\
</span></span></span><span style=display:flex><span>    -v ./config:/config/rclone <span style=color:#87ceeb>\
</span></span></span><span style=display:flex><span>    -v ./data:/data <span style=color:#87ceeb>\
</span></span></span><span style=display:flex><span>    rclone/rclone --drive-shared-with-me <span style=color:#87ceeb>\
</span></span></span><span style=display:flex><span>    copy /data/<span style=color:red>$(</span>date +<span style=color:#87ceeb>&#34;%Y-%m-%d&#34;</span><span style=color:red>)</span> google-drive:&lt;SHARED FOLDER&gt;
</span></span></code></pre></div><p>Be aware that if you recover data, the original permissions will be lost, and
the <em>Service Account</em> will become the owner of all recovered data.</p><h4 id=important-note><a href=#important-note>#</a> Important Note</h4><p>A <em>Service Account</em> is essentially an account with its own folder and
permissions within Google Drive. Therefore, you must share the desired folders
with it. The <code>&lt;SHARED FOLDER></code> in the bash command refers to the exact name of
the shared folder.</p><h2 id=conclusion><a href=#conclusion>#</a> Conclusion</h2><p>This provides a solid foundation for Google Drive backup. To enhance its
enterprise-level security and reliability, consider implementing additional
<a href=https://rclone.org/crypt/ target=_blank rel="noopener noreferrer">encryption</a> and robust, cost-effective
<a href=https://rclone.org/s3/ target=_blank rel="noopener noreferrer">storage</a> solutions.</p><p>Stay tuned, we’re gonna talk about that
<a href=/blog/posts/google-drive-backup-part2/>next</a>.</p></article></div></main><footer class=site-footer><a target=_blank rel="noopener noreferrer external" href=https://newsletter.bogomolov.work>Newsletter</a> | <a target=_blank href=/index.xml>RSS</a></footer><script>(function(){var e=document.createElement("script");e.src="https://unpkg.com/@grafana/faro-web-sdk@2/dist/bundle/faro-web-sdk.iife.js",e.onload=()=>{window.GrafanaFaroWebSdk.initializeFaro({url:"https://faro-collector-prod-eu-west-2.grafana.net/collect/280a442f2880e6eb5e953a7169416ccf",app:{name:"blog",version:"1.0.0",environment:"production"},sessionTracking:{samplingRate:1,persistent:!0}});var e=document.createElement("script");e.src="https://unpkg.com/@grafana/faro-web-tracing@2/dist/bundle/faro-web-tracing.iife.js",e.onload=()=>{window.GrafanaFaroWebSdk.faro.instrumentations.add(new window.GrafanaFaroWebTracing.TracingInstrumentation)},document.head.appendChild(e)},document.head.appendChild(e)})()</script></body></html>